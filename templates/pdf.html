<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
  <!-- <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
  <title>LUBioVision</title>
  <meta charset=utf-8 />

  <script src="{{ url_for('static', filename='upload.js') }}"></script>

  <style type="text/css">
    article,
    aside,
    figure,
    footer,
    header,
    hgroup,
    menu,
    nav,
    section {
      display: block;
    }

    .custom-list {
      list-style-type: none;
      padding-top: -10px;
    }

    .custom-list li {
      margin: 0px -10px 0px 0px;

    }

    .print-area .approval_logo img {
      display: block;

    }

    @media (max-width: 600px) {
      .print-area .approval_logo img {
        display: none;

      }
    }


    @media print {

      /* Sets print view with media query */
      /* body * {
				display: none;
			} */

      /* Sets body and elements in it to not display */
      .print-area,
      .print-area * {
        display: block;
      }

      /* Sets print area element and all its content to display */
    }
  </style>

</head>

<body>


  <div class="row">

    <div class="col-sm-1"></div>

    <div class="col-sm-10">
      <div class="print-area" id="report" style="margin: 10px;">
        <div class="row">
          <div class="col-sm-2">
          </div>


          <div class="col-sm-8">
            </br>
            <div class="col-sm-12">
              <img class="logo" src="\static\reporttitle.jpg" style="  width: 100%; height: 80px;">
            </div>

            </br>
            <div class="row">
              <div style="padding-right: 2px; background-color:rgb(204, 204, 204); width: 100%; height: 1px;">
              </div>


              <div class="col-sm-8">

                <p
                  style="font-size: 16px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;color: #0d5317; font-weight: bold;">
                  Details</p>
                <p style=" font-size: 12px; margin-top: -10px;"><strong>Report ID : </strong> {{uuid}}
                </p>

                <p style=" font-size: 12px; margin-top: -15px;" id="p_name"><strong>Patient Name :
                  </strong>{{patientName}}
                </p>

                <p style=" font-size: 12px; margin-top: -15px;"><strong>Date : </strong> {{date}}
                  <input name="approval" id="approval" value="{{approval}}" hidden />
                </p>


              </div>
              <div class="col-sm-1">
                <div
                  style="margin-top: 5px; padding-right: 0px; background-color:rgb(204, 204, 204); width: 1px; height:100%;">
                </div>
              </div>
              <div class="col-sm-2 approval_logo">

                <div class="approval_logo">
                  <img id="approval_logo" src="" style="width: 100px; height: 100px;">
                </div>


              </div>


            </div>


            <div style="padding-right: 0px; background-color: rgb(204, 204, 204); width: 100%; height: 1px;">
            </div>

            <div class="row">


              <div class="col-sm-8">
                <p
                  style="font-size: 16px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;color: #0d5317; font-weight: bold;">
                  Model Prediction</p>

                <p style=" font-size: 12px; margin-top: -10px;"><strong>Predicted skin cancer type
                    is</strong>
                  {{ val }}</p>

                <p style=" font-size: 12px ; margin-top: -15px;"><strong>Prediction
                    Accuracy:</strong>
                  {{accuracy}}</p>


              </div>
            </div>

            <div style="padding-right: 0px; background-color:rgb(204, 204, 204);width: 100%; height: 1px;">
            </div>

            <div class="row" style="display: inline-block;">
              <p
                style="font-size: 16px;color: #0d5317;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; margin-bottom: 0px;  ">
                Explainability Heatmaps</p>

           
            <p
            style="font-size: 12px;color: #000000;margin-bottom: 0px;  ">
            Input Image &emsp;&emsp;&emsp;&emsp; Grad CAM++ &emsp;&emsp; &emsp;  Grad CAM</p>
          </br>
            <!-- <p style="font-size: 14px;color: #000000;">Input Image</p> -->
          <!-- <div class="col-xs-12 col-sm-4"> -->
                <!-- <p style="font-size: 14px;color: #000000;">Input Image</p> -->
                <img class="logo img-fluid" src="{{imgurl}}"
                  style="margin-top: -10px; width:110px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; height: 90px;">
              <!-- </div> -->
              <!-- <div class=" col-xs-12 col-sm-4"> -->
                <!-- <p style="font-size: 14px;color: #000000; ">Grad CAM++</p> -->
                <img class="logo img-fluid" src="\static\uploaded\{{imgname}}_gradcam++.jpg"
                  style="margin-top: -10px;  width: 110px; height: 90px;">
              <!-- </div> -->
              <!-- <div class="col-xs-12 col-sm-4"> -->
                <!-- <p style="font-size: 14px;color: #000000; ">Grad CAM</p> -->
                <img class="logo img-fluid" src="\static\uploaded\{{imgname}}_gradcam.jpg"
                  style="margin-top: -10px;  width: 110px; height: 90px;">
              <!-- </div>  -->
            </br>

            </div>
    
            <div style="margin-top: 5px; padding-right: 0px; background-color:rgb(204, 204, 204); width: 100%; height: 1px;">
            </div>


            <div class="row">
            </br>
              <div class="col-sm-12">
                <p
                  style="font-size: 16px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: #0d5317; font-weight: bold;margin-bottom: 0px; ">
                  Dermatologist Feedback </p>
                <div>
                  <p style="font-size: 12px; word-break:break-all; " id="p_comment">{{feedback}}</p>
                </div>

              </div>

            </div>

            <div style="padding-right: 0px; background-color:rgb(204, 204, 204); width: 100%; height: 1px;">
            </div>

            <p style="font-size: 9px; font-style: italic;">The automated skin cancer prediction should be understood to
              be
              subject to errors and inaccuracies for which the LUBIOVISON team disclaims all
              liability.
              All risks associated with using the system are assumed by the user.
            </p>


            <div style="padding-right: 0px; background-color: #00776d; width: 100%; height:10px;">
            </div>

          </div>


          <div class="col-sm-2"></div>
        </div>
      </div>
      <div class="row" style="margin: 10px;">
        <div class="col-sm-2"></div>
        <div class="col-sm-4" style="text-align: right;"></div>
        <div class="col-sm-2" style="text-align: right;">
          </br>
          <button class="btn btn-outline-success" id="printBtn"
            style=" text-align: center; width: 100%; height: 50%; padding: 2px;" onclick="generatePDF()">
            <p class="fs-6">
              Download </p>
          </button>
        </div>

        <div class="col-sm-2" style="text-align: right;">
          <form action="http://127.0.0.1:5000/generate" method="POST" enctype="multipart/form-data">
            </br>
            <input type="hidden" id="url" name="url" value="{{imgurl}}">
            <button type="submit" class="btn btn-outline-success" style="text-align: center;height: 40px;">
              <p class="fs-6">
                Back
              </p>
            </button>

          </form>
        </div>
        <div class="col-sm-2"></div>

      </div>
    </div>
    <div class="col-sm-1"></div>
  </div>


  </div>


  </div>

  </div>
  <!-- <script type="text/javascript">
		document.getElementById('printBtn').addEventListener('click', () => { print() });
		// Prints area to which class was assigned only
	</script> -->

  <script>

    var approvals = document.getElementById("approval").value; // Set the approval value based on your logic
    if (approvals == "true") {
      document.getElementById("approval_logo").src = "static/approved.jpg";
    } else {
      document.getElementById("approval_logo").src = "static/rejected.jpg";
    }

    function generatePDF() {
      const element = document.getElementById("report");
      html2pdf().from(element).save();
    }


    function changeCont(element) {

      // document.getElementById("p_name").innerHTML = "Patient Name : " + document.getElementById("contact-name").value;
      // document.getElementById("p_comment").innerHTML = document.getElementById("contact-message").value
      // document.getElementById("p_comment").innerHTML = document.getElementById("contact-message").value
      // document.getElementById("printBtn").style.display = 'block';

      // var status=document.getElementsByName("model").value
      if (document.getElementById("Reject").checked) {
        document.getElementById("approve_logo").style.display = 'none';
        document.getElementById("reject_logo").style.display = 'block';
      }
      else {
        document.getElementById("approve_logo").style.display = 'block';
        document.getElementById("reject_logo").style.display = 'none';
      }
      // document.getElementById("generatepdf").style.display = 'none';
    }



  </script>
</body>

</html>